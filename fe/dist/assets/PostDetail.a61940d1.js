var t=Object.defineProperty,e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(e,a,s)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s;"undefined"!=typeof require&&require;import{D as l,g as o}from"./getPostDetail.1666df61.js";import{_ as n}from"./CMdEditor.vue_vue&type=style&index=0&lang.9bb6d1e8.js";import{r,e as d,c as p,_ as c,b as u}from"./index.cb1502e5.js";import{h as m,d as v}from"./hot.5d6d7e75.js";import{d as f,a as y,c as _}from"./vendor.352936e6.js";var b=f({name:"PostDetail",props:{id:{type:String,required:!0}},setup(t){const f=y(((t,l)=>{for(var o in l||(l={}))a.call(l,o)&&i(t,o,l[o]);if(e)for(var o of e(l))s.call(l,o)&&i(t,o,l[o]);return t})({},l)),b=y("");async function g(){if(confirm("确认删除文章吗?")){await async function(t){return!!(await r({method:"DELETE",url:`/post/${t}`})).data}(t.id)&&(alert("删除成功!"),u.go(-1))}}return o(t.id).then((t=>{f.value=t,b.value=t.content,d(t.title)})),()=>_("div",{class:"p-post-detail"},[_("header",{class:"p-post-detail_header"},[_("title",{class:"p-post-detail_title","data-text":f.value.title},[f.value.title]),_("div",{class:"p-post-detail_hot"},[_("img",{src:m,alt:"hot",class:"p-post-detail_hot-icon"},null),_("span",{class:"p-post-detail_hot-count"},[f.value.visited])]),_("div",{class:"p-post-detail_tags"},[f.value.tags.map((t=>_(p,{class:"p-post-detail_tags-tag",name:t.name,key:t._id},null)))]),_("div",{class:"p-post-detail_time u-only-big"},[v(new Date(f.value.updatedAt))])]),_("main",{class:"p-post-detail_main"},[_(n,{readOnly:!0,content:b},null)]),_("div",{class:"p-post-detail_actions"},[_(c,{content:"编辑",onClick:()=>u.push({name:"admin-edit",params:{id:f.value._id}})},null),_(c,{content:"删除",onClick:g},null)])])}});export{b as default};
