var t=Object.defineProperty,e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(e,a,s)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s;"undefined"!=typeof require&&require;import{D as l,g as o}from"./getPostDetail.d51ead71.js";import{_ as n}from"./CMdEditor.vue_vue&type=style&index=0&lang.1369e636.js";import{r,c as d,_ as p,b as c}from"./index.213a0884.js";import{h as u,d as m}from"./hot.5d6d7e75.js";import{d as v,a as f,c as y}from"./vendor.352936e6.js";var _=v({name:"PostDetail",props:{id:{type:String,required:!0}},setup(t){const v=f(((t,l)=>{for(var o in l||(l={}))a.call(l,o)&&i(t,o,l[o]);if(e)for(var o of e(l))s.call(l,o)&&i(t,o,l[o]);return t})({},l)),_=f("");async function g(){if(confirm("确认删除文章吗?")){await async function(t){return!!(await r({method:"DELETE",url:`/post/${t}`})).data}(t.id)&&(alert("删除成功!"),c.go(-1))}}return o(t.id).then((t=>{v.value=t,_.value=t.content})),()=>y("div",{class:"p-post-detail"},[y("header",{class:"p-post-detail_header"},[y("title",{class:"p-post-detail_title","data-text":v.value.title},[v.value.title]),y("div",{class:"p-post-detail_hot"},[y("img",{src:u,alt:"hot",class:"p-post-detail_hot-icon"},null),y("span",{class:"p-post-detail_hot-count"},[v.value.visited])]),y("div",{class:"p-post-detail_tags"},[v.value.tags.map((t=>y(d,{class:"p-post-detail_tags-tag",name:t.name,key:t._id},null)))]),y("div",{class:"p-post-detail_time u-only-big"},[m(new Date(v.value.updatedAt))])]),y("main",{class:"p-post-detail_main"},[y(n,{readOnly:!0,content:_},null)]),y("div",{class:"p-post-detail_actions"},[y(p,{content:"编辑",onClick:()=>c.push({name:"admin-edit",params:{id:v.value._id}})},null),y(p,{content:"删除",onClick:g},null)])])}});export{_ as default};
